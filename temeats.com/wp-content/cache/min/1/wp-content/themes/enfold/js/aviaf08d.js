if(!Array.isArray){Array.isArray=function(arg){return Object.prototype.toString.call(arg)==='[object Array]'}}(function($){"use strict";$(function(){$.avia_utilities=$.avia_utilities||{};AviaBrowserDetection('html');AviaDeviceDetection('html');avia_scroll_top_fade();aviaCalcContentWidth();new $.AviaTooltip({"class":'avia-search-tooltip',data:'avia-search-tooltip',event:'click',position:'bottom',scope:"body",attach:'element',within_screen:!0,close_keys:27});new $.AviaTooltip({"class":'avia-related-tooltip',data:'avia-related-tooltip',scope:".related_posts, .av-share-box",attach:'element',delay:0});new $.AviaAjaxSearch({scope:'#header, .avia_search_element'});if($.fn.avia_iso_sort){$('.grid-sort-container').avia_iso_sort()}
AviaSidebarShadowHelper();$.avia_utilities.avia_ajax_call()});$.avia_utilities=$.avia_utilities||{};$.avia_utilities.avia_ajax_call=function(container){if(typeof container=='undefined'){container='body'};$('a.avianolink').on('click',function(e){e.preventDefault()});$('a.aviablank').attr('target','_blank');if($.fn.avia_activate_lightbox){$(container).avia_activate_lightbox()}
if($.fn.avia_scrollspy){if(container=='body'){$('body').avia_scrollspy({target:'.main_menu .menu li > a'})}else{$('body').avia_scrollspy('refresh')}}
if($.fn.avia_smoothscroll){$('a[href*="#"]',container).avia_smoothscroll(container)}
avia_small_fixes(container);avia_hover_effect(container);avia_iframe_fix(container);if($.fn.avia_html5_activation&&$.fn.mediaelementplayer){$(".avia_video, .avia_audio",container).avia_html5_activation({ratio:'16:9'})}};$.avia_utilities.log=function(text,type,extra){if(typeof console=='undefined'){return}
if(typeof type=='undefined'){type="log"}
type="AVIA-"+type.toUpperCase();console.log("["+type+"] "+text);if(typeof extra!='undefined'){console.log(extra)}};function aviaCalcContentWidth(){var win=$(window),width_select=$('html').is('.html_header_sidebar')?"#main":"#header",outer=$(width_select),outerParent=outer.parents('div').eq(0),the_main=$(width_select+' .container').first(),css_block="",calc_dimensions=function(){var css="",w_12=Math.round(the_main.width()),w_outer=Math.round(outer.width()),w_inner=Math.round(outerParent.width());css+=" #header .three.units{width:"+(w_12*0.25)+"px;}";css+=" #header .six.units{width:"+(w_12*0.50)+"px;}";css+=" #header .nine.units{width:"+(w_12*0.75)+"px;}";css+=" #header .twelve.units{width:"+(w_12)+"px;}";css+=" .av-framed-box .av-layout-tab-inner .container{width:"+(w_inner)+"px;}";css+=" .html_header_sidebar .av-layout-tab-inner .container{width:"+(w_outer)+"px;}";css+=" .boxed .av-layout-tab-inner .container{width:"+(w_outer)+"px;}";css+=" .av-framed-box#top .av-submenu-container{width:"+(w_inner)+"px;}";try{css_block.text(css)}catch(err){css_block.remove();var headFirst=$('head').first();css_block=$("<style type='text/css' id='av-browser-width-calc'>"+css+"</style>").appendTo(headFirst)}};if($('.avia_mega_div').length>0||$('.av-layout-tab-inner').length>0||$('.av-submenu-container').length>0){var headFirst=$('head').first();css_block=$("<style type='text/css' id='av-browser-width-calc'></style>").appendTo(headFirst);win.on('debouncedresize',calc_dimensions);calc_dimensions()}}
function AviaSidebarShadowHelper(){var $sidebar_container=$('.sidebar_shadow#top #main .sidebar');var $content_container=$('.sidebar_shadow .content');if($sidebar_container.height()>=$content_container.height()){$sidebar_container.addClass('av-enable-shadow')}else{$content_container.addClass('av-enable-shadow')}}
function AviaScrollSpy(element,options){var self=this;var process=self.process.bind(self),refresh=self.refresh.bind(self),$element=$(element).is('body')?$(window):$(element),href;self.$body=$('body');self.$win=$(window);self.options=$.extend({},$.fn.avia_scrollspy.defaults,options);self.selector=(self.options.target||((href=$(element).attr('href'))&&href.replace(/.*(?=#[^\s]+$)/,''))||'');self.activation_true=!1;if(self.$body.find(self.selector+"[href*='#']").length){self.$scrollElement=$element.on('scroll.scroll-spy.data-api',process);self.$win.on('av-height-change',refresh);self.$body.on('av_resize_finished',refresh);self.activation_true=!0;self.checkFirst();setTimeout(function(){self.refresh();self.process()},100)}}
AviaScrollSpy.prototype={constructor:AviaScrollSpy,checkFirst:function(){var current=window.location.href.split('#')[0],matching_link=this.$body.find(this.selector+"[href='"+current+"']").attr('href',current+'#top')},refresh:function(){if(!this.activation_true)return;var self=this,$targets;this.offsets=$([]);this.targets=$([]);$targets=this.$body.find(this.selector).map(function(){var $el=$(this),href=$el.data('target')||$el.attr('href'),hash=this.hash,hash=hash.replace(/\//g,""),$href=/^#\w/.test(hash)&&$(hash);var obj=self.$scrollElement.get(0);var isWindow=obj!=null&&obj===obj.window;return($href&&$href.length&&[[$href.position().top+(!isWindow&&self.$scrollElement.scrollTop()),href]])||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){self.offsets.push(this[0]);self.targets.push(this[1])})},process:function(){if(!this.offsets)return;if(isNaN(this.options.offset))this.options.offset=0;var scrollTop=this.$scrollElement.scrollTop()+this.options.offset,scrollHeight=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,maxScroll=scrollHeight-this.$scrollElement.height(),offsets=this.offsets,targets=this.targets,activeTarget=this.activeTarget,i;if(scrollTop>=maxScroll){return activeTarget!=(i=targets.last()[0])&&this.activate(i)}
for(i=offsets.length;i--;){activeTarget!=targets[i]&&scrollTop>=offsets[i]&&(!offsets[i+1]||scrollTop<=offsets[i+1])&&this.activate(targets[i])}},activate:function(target){var active,selector;this.activeTarget=target;$(this.selector).parent('.'+this.options.applyClass).removeClass(this.options.applyClass);selector=this.selector+'[data-target="'+target+'"],'+this.selector+'[href="'+target+'"]';active=$(selector).parent('li').addClass(this.options.applyClass);if(active.parent('.sub-menu').length){active=active.closest('li.dropdown_ul_available').addClass(this.options.applyClass)}
active.trigger('activate')}};$.fn.avia_scrollspy=function(option){return this.each(function(){var $this=$(this),data=$this.data('scrollspy'),options=typeof option=='object'&&option;if(!data)$this.data('scrollspy',(data=new AviaScrollSpy(this,options)));if(typeof option=='string')data[option]()})};$.fn.avia_scrollspy.Constructor=AviaScrollSpy;$.fn.avia_scrollspy.calc_offset=function(){var offset_1=(parseInt($('.html_header_sticky #main').data('scroll-offset'),10))||0,offset_2=($(".html_header_sticky:not(.html_top_nav_header) #header_main_alternate").outerHeight())||0,offset_3=($(".html_header_sticky.html_header_unstick_top_disabled #header_meta").outerHeight())||0,offset_4=1,offset_5=parseInt($('html').css('margin-top'),10)||0,offset_6=parseInt($('.av-frame-top ').outerHeight(),10)||0;return offset_1+offset_2+offset_3+offset_4+offset_5+offset_6};$.fn.avia_scrollspy.defaults={offset:$.fn.avia_scrollspy.calc_offset(),applyClass:'current-menu-item'};function AviaBrowserDetection(outputClassElement){var current_browser={},uaMatch=function(ua){ua=ua.toLowerCase();var match=/(edge)\/([\w.]+)/.exec(ua)||/(opr)[\/]([\w.]+)/.exec(ua)||/(chrome)[ \/]([\w.]+)/.exec(ua)||/(iemobile)[\/]([\w.]+)/.exec(ua)||/(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(ua)||/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(ua)||/(webkit)[ \/]([\w.]+)/.exec(ua)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(ua)||/(msie) ([\w.]+)/.exec(ua)||ua.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(ua)||ua.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(ua)||[];return{browser:match[5]||match[3]||match[1]||"",version:match[2]||match[4]||"0",versionNumber:match[4]||match[2]||"0"}};var matched=uaMatch(navigator.userAgent);if(matched.browser){current_browser.browser=matched.browser;current_browser[matched.browser]=!0;current_browser.version=matched.version}
if(current_browser.chrome){current_browser.webkit=!0}else if(current_browser.webkit){current_browser.safari=!0}
if(typeof(current_browser)!=='undefined'){var bodyclass='',version=current_browser.version?parseInt(current_browser.version):"";if(current_browser.msie||current_browser.rv||current_browser.iemobile){bodyclass+='avia-msie'}else if(current_browser.webkit){bodyclass+='avia-webkit'}else if(current_browser.mozilla){bodyclass+='avia-mozilla'}
if(current_browser.version)bodyclass+=' '+bodyclass+'-'+version+' ';if(current_browser.browser)bodyclass+=' avia-'+current_browser.browser+' avia-'+current_browser.browser+'-'+version+' '}
if(outputClassElement){$(outputClassElement).addClass(bodyclass)}
return bodyclass}
function AviaDeviceDetection(outputClassElement){var classes=[];$.avia_utilities.isTouchDevice='ontouchstart' in window||window.DocumentTouch&&document instanceof window.DocumentTouch||navigator.maxTouchPoints>0||window.navigator.msMaxTouchPoints>0;classes.push($.avia_utilities.isTouchDevice?'touch-device':'no-touch-device');$.avia_utilities.pointerDevices=[];if(typeof window.matchMedia!='function'){$.avia_utilities.pointerDevices.push('undefined');classes.push('pointer-device-undefined')}else{var pointer_fine=!1;if(window.matchMedia('(any-pointer: fine)')){classes.push('pointer-device-fine');$.avia_utilities.pointerDevices.push('fine');pointer_fine=!0}
if(window.matchMedia('(any-pointer: coarse)')){classes.push('pointer-device-coarse');$.avia_utilities.pointerDevices.push('coarse');if(!pointer_fine){classes.push('pointer-device-coarse-only')}}
if(!$.avia_utilities.pointerDevices.length){classes.push('pointer-device-none');$.avia_utilities.pointerDevices.push('none')}}
if('undefined'==typeof $.avia_utilities.isMobile){if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&'ontouchstart' in document.documentElement){$.avia_utilities.isMobile=!0}else{$.avia_utilities.isMobile=!1}}
$(outputClassElement).addClass(classes.join(' '))}
$.fn.avia_html5_activation=function(options){var defaults={ratio:'16:9'};var options=$.extend(defaults,options);this.each(function(){var fv=$(this),id_to_apply='#'+fv.attr('id'),posterImg=fv.attr('poster'),features=['playpause','progress','current','duration','tracks','volume'],container=fv.closest('.avia-video');if(container.length>0&&container.hasClass('av-html5-fullscreen-btn')){features.push('fullscreen')}
fv.mediaelementplayer({defaultVideoWidth:480,defaultVideoHeight:270,videoWidth:-1,videoHeight:-1,audioWidth:400,audioHeight:30,startVolume:0.8,loop:!1,enableAutosize:!1,features:features,alwaysShowControls:!1,iPadUseNativeControls:!1,iPhoneUseNativeControls:!1,AndroidUseNativeControls:!1,alwaysShowHours:!1,showTimecodeFrameCount:!1,framesPerSecond:25,enableKeyboard:!0,pauseOtherPlayers:!1,poster:posterImg,success:function(mediaElement,domObject,instance){$.AviaVideoAPI.players[fv.attr('id').replace(/_html5/,'')]=instance;setTimeout(function(){if(mediaElement.pluginType=='flash'){mediaElement.addEventListener('canplay',function(){fv.trigger('av-mediajs-loaded')},!1)}else{fv.trigger('av-mediajs-loaded').addClass('av-mediajs-loaded')}
mediaElement.addEventListener('ended',function(){fv.trigger('av-mediajs-ended')},!1);var html5MediaElement=document.getElementById($(mediaElement).attr('id')+'_html5');if(html5MediaElement&&html5MediaElement!==mediaElement){mediaElement.addEventListener("ended",function(){$(html5MediaElement).trigger('av-mediajs-ended')})}},10)},error:function(){},keyActions:[]})})};function avia_hover_effect(container){if($.avia_utilities.isMobile){return}
if($('body').hasClass('av-disable-avia-hover-effect')){return}
var overlay="",cssTrans=$.avia_utilities.supports('transition');if(container=='body'){var elements=$('#main a img').parents('a').not('.noLightbox, .noLightbox a, .avia-gallery-thumb a, .ls-wp-container a, .noHover, .noHover a, .av-logo-container .logo a').add('#main .avia-hover-fx')}else{var elements=$('a img',container).parents('a').not('.noLightbox, .noLightbox a, .avia-gallery-thumb a, .ls-wp-container a, .noHover, .noHover a, .av-logo-container .logo a').add('.avia-hover-fx',container)}
elements.each(function(e){var link=$(this),current=link.find('img').first();if(current.hasClass('alignleft'))link.addClass('alignleft').css({float:'left',margin:0,padding:0});if(current.hasClass('alignright'))link.addClass('alignright').css({float:'right',margin:0,padding:0});if(current.hasClass('aligncenter'))link.addClass('aligncenter').css({float:'none','text-align':'center',margin:0,padding:0});if(current.hasClass('alignnone')){link.addClass('alignnone').css({margin:0,padding:0});if(!link.css('display')||link.css('display')=='inline'){link.css({display:'inline-block'})}}
if(!link.css('position')||link.css('position')=='static'){link.css({position:'relative',overflow:'hidden'})}
var url=link.attr('href'),span_class="overlay-type-video",opa=link.data('opacity')||0.7,overlay_offset=5,overlay=link.find('.image-overlay');if(url){if(url.match(/(jpg|gif|jpeg|png|tif)/))span_class="overlay-type-image";if(!url.match(/(jpg|gif|jpeg|png|\.tif|\.mov|\.swf|vimeo\.com|youtube\.com)/))span_class="overlay-type-extern"}
if(!overlay.length){overlay=$("<span class='image-overlay "+span_class+"'><span class='image-overlay-inside'></span></span>").appendTo(link)}
link.on('mouseenter',function(e){var current=link.find('img').first(),_self=current.get(0),outerH=current.outerHeight(),outerW=current.outerWidth(),pos=current.position(),linkCss=link.css('display'),overlay=link.find('.image-overlay');if(outerH>100){if(!overlay.length){overlay=$("<span class='image-overlay "+span_class+"'><span class='image-overlay-inside'></span></span>").appendTo(link)}
if(link.height()==0){link.addClass(_self.className);_self.className=""}
if(!linkCss||linkCss=='inline'){link.css({display:'block'})}
overlay.css({left:(pos.left-overlay_offset)+parseInt(current.css("margin-left"),10),top:pos.top+parseInt(current.css("margin-top"),10)}).css({overflow:'hidden',display:'block','height':outerH,'width':(outerW+(2*overlay_offset))});if(cssTrans===!1)overlay.stop().animate({opacity:opa},400)}else{overlay.css({display:"none"})}}).on('mouseleave',elements,function(){if(overlay.length){if(cssTrans===!1)overlay.stop().animate({opacity:0},400)}})})}(function($){$.fn.avia_smoothscroll=function(apply_to_container){if(!this.length){return}
var the_win=$(window),$header=$('#header'),$main=$('.html_header_top.html_header_sticky #main').not('.page-template-template-blank-php #main'),$meta=$('.html_header_top.html_header_unstick_top_disabled #header_meta'),$alt=$('.html_header_top:not(.html_top_nav_header) #header_main_alternate'),menu_above_logo=$('.html_header_top.html_top_nav_header'),shrink=$('.html_header_top.html_header_shrinking').length,frame=$('.av-frame-top'),fixedMainPadding=0,isMobile=$.avia_utilities.isMobile,sticky_sub=$('.sticky_placeholder').first(),calc_main_padding=function(){if($header.css('position')=="fixed"){var tempPadding=parseInt($main.data('scroll-offset'),10)||0,non_shrinking=parseInt($meta.outerHeight(),10)||0,non_shrinking2=parseInt($alt.outerHeight(),10)||0;if(tempPadding>0&&shrink){tempPadding=(tempPadding/2)+non_shrinking+non_shrinking2}else{tempPadding=tempPadding+non_shrinking+non_shrinking2}
tempPadding+=parseInt($('html').css('margin-top'),10);fixedMainPadding=tempPadding}else{fixedMainPadding=parseInt($('html').css('margin-top'),10)}
if(frame.length){fixedMainPadding+=frame.height()}
if(menu_above_logo.length){fixedMainPadding=$('.html_header_sticky #header_main_alternate').height()+parseInt($('html').css('margin-top'),10)}
if(isMobile){fixedMainPadding=0}};if(isMobile){shrink=!1}
calc_main_padding();the_win.on("debouncedresize av-height-change",calc_main_padding);var hash=window.location.hash.replace(/\//g,"");if(fixedMainPadding>0&&hash&&apply_to_container=='body'&&hash.charAt(1)!="!"&&hash.indexOf("=")===-1){var scroll_to_el=$(hash),modifier=0;if(scroll_to_el.length){the_win.on('scroll.avia_first_scroll',function(){setTimeout(function(){if(sticky_sub.length&&scroll_to_el.offset().top>sticky_sub.offset().top){modifier=sticky_sub.outerHeight()-3}
the_win.off('scroll.avia_first_scroll').scrollTop(scroll_to_el.offset().top-fixedMainPadding-modifier)},10)})}}
return this.each(function(){$(this).on('click',function(e){var newHash=this.hash.replace(/\//g,""),clicked=$(this),data=clicked.data();if(newHash!=''&&newHash!='#'&&newHash!='#prev'&&newHash!='#next'&&!clicked.is('.comment-reply-link, #cancel-comment-reply-link, .no-scroll')){var container="",originHash="";if('#next-section'==newHash){originHash=newHash;var next_containers=clicked.parents('.container_wrap').eq(0).nextAll('.container_wrap');next_containers.each(function(){var cont=$(this);if(cont.css('display')=='none'||cont.css('visibility')=='hidden'){return}
container=cont;return!1});if('object'==typeof container&&container.length>0){newHash='#'+container.attr('id')}}else{container=$(this.hash.replace(/\//g,""))}
if(container.length){var cur_offset=the_win.scrollTop(),container_offset=container.offset().top,target=container_offset-fixedMainPadding,hash=window.location.hash,hash=hash.replace(/\//g,""),oldLocation=window.location.href.replace(hash,''),newLocation=this,duration=data.duration||1200,easing=data.easing||'easeInOutQuint';if(sticky_sub.length&&container_offset>sticky_sub.offset().top){target-=sticky_sub.outerHeight()-3}
if(oldLocation+newHash==newLocation||originHash){if(cur_offset!=target){if(!(cur_offset==0&&target<=0)){the_win.trigger('avia_smooth_scroll_start');$('html:not(:animated),body:not(:animated)').animate({scrollTop:target},duration,easing,function(){if(window.history.replaceState){window.history.replaceState("","",newHash)}})}}
e.preventDefault()}}}})})}})(jQuery);function avia_iframe_fix(container){var iframe=jQuery('iframe[src*="youtube.com"]:not(.av_youtube_frame)',container),youtubeEmbed=jQuery('iframe[src*="youtube.com"]:not(.av_youtube_frame) object, iframe[src*="youtube.com"]:not(.av_youtube_frame) embed',container).attr('wmode','opaque');iframe.each(function(){var current=jQuery(this),src=current.attr('src');if(src){if(src.indexOf('?')!==-1){src+="&wmode=opaque&rel=0"}else{src+="?wmode=opaque&rel=0"}
current.attr('src',src)}})}
function avia_small_fixes(container){if(!container)container=document;var win=jQuery(window),iframes=jQuery('.avia-iframe-wrap iframe:not(.avia-slideshow iframe):not( iframe.no_resize):not(.avia-video iframe)',container),adjust_iframes=function(){iframes.each(function(){var iframe=jQuery(this),parent=iframe.parent(),proportions=56.25;if(this.width&&this.height){proportions=(100/this.width)*this.height;parent.css({"padding-bottom":proportions+"%"})}})};adjust_iframes()}
function avia_scroll_top_fade(){var win=$(window),timeo=!1,scroll_top=$('#scroll-top-link'),set_status=function(){var st=win.scrollTop();if(st<500){scroll_top.removeClass('avia_pop_class')}else if(!scroll_top.is('.avia_pop_class')){scroll_top.addClass('avia_pop_class')}};win.on('scroll',function(){window.requestAnimationFrame(set_status)});set_status()}
$.AviaAjaxSearch=function(options){var defaults={delay:300,minChars:3,scope:'body'};this.options=$.extend({},defaults,options);this.scope=$(this.options.scope);this.timer=!1;this.lastVal="";this.bind_events()};$.AviaAjaxSearch.prototype={bind_events:function(){this.scope.on('keyup','#s:not(".av_disable_ajax_search #s")',this.try_search.bind(this));this.scope.on('click','#s.av-results-parked',this.reset.bind(this))},try_search:function(e){var form=$(e.currentTarget).parents('form').eq(0),resultscontainer=form.find('.ajax_search_response');clearTimeout(this.timer);if(e.keyCode===27){this.reset(e);return}
if(e.currentTarget.value.length>=this.options.minChars&&this.lastVal!=e.currentTarget.value.trim()){this.timer=setTimeout(this.do_search.bind(this,e),this.options.delay)}else if(e.currentTarget.value.length==0){this.timer=setTimeout(this.reset.bind(this,e),this.options.delay)}},reset:function(e){var form=$(e.currentTarget).parents('form').eq(0),resultscontainer=form.find('.ajax_search_response'),alternative_resultscontainer=$(form.attr('data-ajaxcontainer')).find('.ajax_search_response'),searchInput=$(e.currentTarget);if($(e.currentTarget).hasClass('av-results-parked')){resultscontainer.show();alternative_resultscontainer.show();$('body > .ajax_search_response').show()}else{resultscontainer.remove();alternative_resultscontainer.remove();searchInput.val('');$('body > .ajax_search_response').remove()}},do_search:function(e){var obj=this,currentField=$(e.currentTarget).attr("autocomplete","off"),currentFieldWrapper=$(e.currentTarget).parents('.av_searchform_wrapper').eq(0),currentField_position=currentFieldWrapper.offset(),currentField_width=currentFieldWrapper.outerWidth(),currentField_height=currentFieldWrapper.outerHeight(),form=currentField.parents('form').eq(0),submitbtn=form.find('#searchsubmit'),resultscontainer=form,results=resultscontainer.find('.ajax_search_response'),loading=$('<div class="ajax_load"><span class="ajax_load_inner"></span></div>'),action=form.attr('action'),values=form.serialize(),elementID=form.data('element_id'),custom_color=form.data('custom_color');values+='&action=avia_ajax_search';if(!results.length){results=$('<div class="ajax_search_response" style="display:none;"></div>')}
if('undefined'!=typeof elementID){results.addClass(elementID)}
if('undefined'!=typeof custom_color&&custom_color!=''){results.addClass('av_has_custom_color')}
if(form.attr('id')=='searchform_element'){results.addClass('av_searchform_element_results')}
if(action.indexOf('?')!=-1){action=action.split('?');values+="&"+action[1]}
if(form.attr('data-ajaxcontainer')){var rescon=form.attr('data-ajaxcontainer');if($(rescon).length){$(rescon).find('.ajax_search_response').remove();resultscontainer=$(rescon)}}
results_css={};if(form.hasClass('av_results_container_fixed')){$('body').find('.ajax_search_response').remove();resultscontainer=$('body');var results_css={top:currentField_position.top+currentField_height,left:currentField_position.left,width:currentField_width};results.addClass('main_color');$(window).resize(function(){results.remove();this.reset.bind(this);currentField.val('')})}
if(form.attr('data-results_style')){var results_style=JSON.parse(form.attr('data-results_style'));results_css=Object.assign(results_css,results_style);if("color" in results_css){results.addClass('av_has_custom_color')}}
results.css(results_css);if(resultscontainer.hasClass('avia-section')){results.addClass('container')}
results.appendTo(resultscontainer);if(results.find('.ajax_not_found').length&&e.currentTarget.value.indexOf(this.lastVal)!=-1){return}
this.lastVal=e.currentTarget.value;$.ajax({url:avia_framework_globals.ajaxurl,type:"POST",data:values,beforeSend:function(){loading.insertAfter(submitbtn);form.addClass('ajax_loading_now')},success:function(response){if(response==0){response=""}
results.html(response).show()},complete:function(){loading.remove();form.removeClass('ajax_loading_now')}});$(document).on('click',function(e){if(!$(e.target).closest(form).length){if($(results).is(":visible")){$(results).hide();currentField.addClass('av-results-parked')}}})}};$.AviaTooltip=function(options){var defaults={delay:1500,delayOut:300,delayHide:0,"class":"avia-tooltip",scope:"body",data:"avia-tooltip",attach:"body",event:'mouseenter',position:'top',extraClass:'avia-tooltip-class',permanent:!1,within_screen:!1,close_keys:null};this.options=$.extend({},defaults,options);var close_keys='';if(this.options.close_keys!=null){if(!Array.isArray(this.options.close_keys)){this.options.close_keys=[this.options.close_keys]}
close_keys=' data-close-keys="'+this.options.close_keys.join(',')+'" '}
this.body=$('body');this.scope=$(this.options.scope);this.tooltip=$('<div class="'+this.options['class']+' avia-tt"'+close_keys+'><span class="avia-arrow-wrap"><span class="avia-arrow"></span></span></div>');this.inner=$('<div class="inner_tooltip"></div>').prependTo(this.tooltip);this.open=!1;this.timer=!1;this.active=!1;this.bind_events()};$.AviaTooltip.openTTs=[];$.AviaTooltip.openTT_Elements=[];$.AviaTooltip.prototype={bind_events:function(){var perma_tooltips='.av-permanent-tooltip [data-'+this.options.data+']',default_tooltips='[data-'+this.options.data+']:not( .av-permanent-tooltip [data-'+this.options.data+'])';this.scope.on('av_permanent_show',perma_tooltips,this.display_tooltip.bind(this));$(perma_tooltips).addClass('av-perma-tooltip').trigger('av_permanent_show');this.scope.on(this.options.event+' mouseleave',default_tooltips,this.start_countdown.bind(this));if(this.options.event!='click'){this.scope.on('mouseleave',default_tooltips,this.hide_tooltip.bind(this));this.scope.on('click',default_tooltips,this.hide_on_click_tooltip.bind(this))}else{this.body.on('mousedown',this.hide_tooltip.bind(this))}
if(this.options.close_keys!=null){this.body.on('keyup',this.close_on_keyup.bind(this))}},start_countdown:function(e){clearTimeout(this.timer);var target=this.options.event=="click"?e.target:e.currentTarget,element=$(target);if(e.type==this.options.event){var delay=this.options.event=='click'?0:this.open?0:this.options.delay;this.timer=setTimeout(this.display_tooltip.bind(this,e),delay)}else if(e.type=='mouseleave'){if(!element.hasClass('av-close-on-click-tooltip')){this.timer=setTimeout(this.stop_instant_open.bind(this,e),this.options.delayOut)}}
e.preventDefault()},reset_countdown:function(e){clearTimeout(this.timer);this.timer=!1},display_tooltip:function(e){var _self=this,target=this.options.event=="click"?e.target:e.currentTarget,element=$(target),text=element.data(this.options.data),tip_index=element.data('avia-created-tooltip'),extraClass=element.data('avia-tooltip-class'),attach=this.options.attach=='element'?element:this.body,offset=this.options.attach=='element'?element.position():element.offset(),position=element.data('avia-tooltip-position'),align=element.data('avia-tooltip-alignment'),force_append=!1,newTip=!1,is_new_tip=!1;text='string'==typeof text?text.trim():'';if(element.is('.av-perma-tooltip')){offset={top:0,left:0};attach=element;force_append=!0}
if(text==""){return}
if(position==""||typeof position=='undefined'){position=this.options.position}
if(align==""||typeof align=='undefined'){align='center'}
if(typeof tip_index!='undefined'){newTip=$.AviaTooltip.openTTs[tip_index]}else{this.inner.html(text);newTip=this.tooltip.clone();is_new_tip=!0;if(this.options.attach=='element'&&force_append!==!0){newTip.insertAfter(attach)}else{newTip.appendTo(attach)}
if(extraClass!=""){newTip.addClass(extraClass)}}
if(this.open&&this.active==newTip){return}
if(element.hasClass('av-close-on-click-tooltip')){this.hide_all_tooltips()}
this.open=!0;this.active=newTip;if((newTip.is(':animated:visible')&&e.type=='click')||element.is('.'+this.options['class'])||element.parents('.'+this.options['class']).length!=0){return}
var animate1={},animate2={},pos1="",pos2="";if(position=="top"||position=="bottom"){switch(align){case "left":pos2=offset.left;break;case "right":pos2=offset.left+element.outerWidth()-newTip.outerWidth();break;default:pos2=(offset.left+(element.outerWidth()/2))-(newTip.outerWidth()/2);break}
if(_self.options.within_screen){var boundary=element.offset().left+(element.outerWidth()/2)-(newTip.outerWidth()/2)+parseInt(newTip.css('margin-left'),10);if(boundary<0){pos2=pos2-boundary}}}else{switch(align){case "top":pos1=offset.top;break;case "bottom":pos1=offset.top+element.outerHeight()-newTip.outerHeight();break;default:pos1=(offset.top+(element.outerHeight()/2))-(newTip.outerHeight()/2);break}}
switch(position){case "top":pos1=offset.top-newTip.outerHeight();animate1={top:pos1-10,left:pos2};animate2={top:pos1};break;case "bottom":pos1=offset.top+element.outerHeight();animate1={top:pos1+10,left:pos2};animate2={top:pos1};break;case "left":pos2=offset.left-newTip.outerWidth();animate1={top:pos1,left:pos2-10};animate2={left:pos2};break;case "right":pos2=offset.left+element.outerWidth();animate1={top:pos1,left:pos2+10};animate2={left:pos2};break}
animate1.display="block";animate1.opacity=0;animate2.opacity=1;newTip.css(animate1).stop().animate(animate2,200);newTip.find('input, textarea').trigger('focus');if(is_new_tip){$.AviaTooltip.openTTs.push(newTip);$.AviaTooltip.openTT_Elements.push(element);element.data('avia-created-tooltip',$.AviaTooltip.openTTs.length-1)}},hide_on_click_tooltip:function(e){if(this.options.event=="click"){return}
var element=$(e.currentTarget);if(!element.hasClass('av-close-on-click-tooltip')){return}
if(!element.find('a')){e.preventDefault()}
var ttip_index=element.data('avia-created-tooltip');if('undefined'!=typeof ttip_index){var current=$.AviaTooltip.openTTs[ttip_index];if('undefined'!=typeof current&&current==this.active){this.hide_all_tooltips()}}},close_on_keyup:function(e){if(this.options.close_keys==null){return}
if($.inArray(e.keyCode,this.options.close_keys)<0){return}
this.hide_all_tooltips(e.keyCode)},hide_all_tooltips:function(keyCode){var ttip,position,element,keyCodeCheck='undefined'!=typeof keyCode?keyCode+'':null;for(var index=0;index<$.AviaTooltip.openTTs.length;++index){ttip=$.AviaTooltip.openTTs[index];element=$.AviaTooltip.openTT_Elements[index];position=element.data('avia-tooltip-position');if(keyCodeCheck!=null){var keys=ttip.data('close-keys');if('undefined'==typeof keys){continue}
keys=keys+'';keys=keys.split(',');if($.inArray(keyCodeCheck,keys)<0){continue}}
this.animate_hide_tooltip(ttip,position)}
this.open=!1;this.active=!1},hide_tooltip:function(e){var element=$(e.currentTarget),newTip,animateTo,position=element.data('avia-tooltip-position'),align=element.data('avia-tooltip-alignment'),newTip=!1;if(position==""||typeof position=='undefined'){position=this.options.position}
if(align==""||typeof align=='undefined'){align='center'}
if(this.options.event=='click'){element=$(e.target);if(!element.is('.'+this.options['class'])&&element.parents('.'+this.options['class']).length==0){if(this.active.length){newTip=this.active;this.active=!1}}}else{if(!element.hasClass('av-close-on-click-tooltip')){newTip=element.data('avia-created-tooltip');newTip=typeof newTip!='undefined'?$.AviaTooltip.openTTs[newTip]:!1}}
this.animate_hide_tooltip(newTip,position)},animate_hide_tooltip:function(ttip,position){if(ttip){var animate={opacity:0};switch(position){case "top":animate.top=parseInt(ttip.css('top'),10)-10;break;case "bottom":animate.top=parseInt(ttip.css('top'),10)+10;break;case "left":animate.left=parseInt(ttip.css('left'),10)-10;break;case "right":animate.left=parseInt(ttip.css('left'),10)+10;break}
ttip.animate(animate,200,function(){ttip.css({display:'none'})})}},stop_instant_open:function(e){this.open=!1}}})(jQuery);
/*!
Waypoints - 4.0.2
Copyright © 2011-2016 Caleb Troughton (up to 4.0.1)
Licensed under the MIT license.
https://github.com/imakewebthings/waypoints/blob/master/licenses.txt
*/
(function(){var lastTime=0;var vendors=['ms','moz','webkit','o'];for(var x=0;x<vendors.length&&!window.requestAnimationFrame;++x){window.requestAnimationFrame=window[vendors[x]+'RequestAnimationFrame'];window.cancelAnimationFrame=window[vendors[x]+'CancelAnimationFrame']||window[vendors[x]+'CancelRequestAnimationFrame']}if(!window.requestAnimationFrame)window.requestAnimationFrame=function(callback,element){var currTime=new Date().getTime();var timeToCall=Math.max(0,16-(currTime-lastTime));var id=window.setTimeout(function(){callback(currTime+timeToCall)},timeToCall);lastTime=currTime+timeToCall;return id};if(!window.cancelAnimationFrame)window.cancelAnimationFrame=function(id){clearTimeout(id)}}());jQuery.expr.pseudos.regex=function(elem,index,match){var matchParams=match[3].split(','),validLabels=/^(data|css):/,attr={method:matchParams[0].match(validLabels)?matchParams[0].split(':')[0]:'attr',property:matchParams.shift().replace(validLabels,'')},regexFlags='ig',regex=new RegExp(matchParams.join('').replace(/^\s+|\s+$/g,''),regexFlags);return regex.test(jQuery(elem)[attr.method](attr.property))}